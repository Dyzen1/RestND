<Window x:Class="RestND.MVVM.View.Windows.EditEmployeeWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:uc="clr-namespace:RestND.MVVM.View.UserControls"
        mc:Ignorable="d"

        Style="{StaticResource smallWindowStyle}"
        Title="Edit Employee"
        WindowStartupLocation="CenterOwner"
        MouseLeftButtonDown="Window_MouseLeftButtonDown">

    <Border Style="{DynamicResource windowBorder}">
        <Grid Margin="12">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <!-- Title -->
            <TextBlock Text="Edit Employee"
                       Foreground="{DynamicResource LightText}"
                       FontWeight="Bold"
                       FontSize="14"
                       Margin="0,0,0,8"/>

            <!-- Form -->
            <StackPanel Grid.Row="1" Orientation="Vertical" Margin="4,0,0,0">

                <!-- Employee ID (read-only) -->
                <StackPanel Orientation="Horizontal" Margin="0 5 0 10">
                    <Label Content="Employee ID:"/>
                    <TextBox Text="{Binding SelectedEmployee.Employee_ID, UpdateSourceTrigger=PropertyChanged}"
                             IsReadOnly="True"
                             Margin="10 0 0 0" Width="260"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0 5 0 10">
                    <Label Content="First Name:"/>
                    <TextBox Text="{Binding SelectedEmployee.Employee_Name, UpdateSourceTrigger=PropertyChanged}"
                             Margin="10 0 0 0" Width="260"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0 5 0 10">
                    <Label Content="Last Name:"/>
                    <TextBox Text="{Binding SelectedEmployee.Employee_LastName, UpdateSourceTrigger=PropertyChanged}"
                             Margin="10 0 0 0" Width="260"/>
                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0 5 0 10">
                    <Label Content="Email:"/>
                    <TextBox Text="{Binding SelectedEmployee.Email, UpdateSourceTrigger=PropertyChanged}"
                             Margin="10 0 0 0" Width="260"/>
                </StackPanel>

                <!-- Role: ListBox (single-select) -->
                <StackPanel Orientation="Horizontal" Margin="0 5 0 10" VerticalAlignment="Top">
                    <Label Content="Role:" VerticalAlignment="Top"/>
                    <ListBox ItemsSource="{Binding Roles}"
                             DisplayMemberPath="Role_Name"
                             SelectedValuePath="Role_ID"
                             SelectedValue="{Binding SelectedEmployee.Role_ID, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                             Margin="10 0 0 0"
                             Width="260"
                             Height="90"
                             SelectionMode="Single"/>
                </StackPanel>

                <!-- Optional form error/info -->
                <TextBlock Text="{Binding FormErrorMessage}"
                           Foreground="{DynamicResource LightText}"
                           Opacity="0.75"/>
            </StackPanel>

            <!-- Bottom bar: Return (left) + Actions (right) -->
            <Grid Grid.Row="2" Margin="0,12,0,0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Return button (left) -->
                <uc:ReturnBtn x:Name="returnBtn"
                              HorizontalAlignment="Left"
                              VerticalAlignment="Center"/>

                <!-- Action buttons (right) -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button Content="Cancel"
                            Margin="0,0,8,0"
                            Click="Cancel_Click"
                            Style="{DynamicResource SubmitBtn}"/>
                    <Button Content="Save Changes"
                            Command="{Binding UpdateEmployeeCommand}"
                            Style="{DynamicResource SubmitBtn}"
                            IsDefault="True"/>
                </StackPanel>
            </Grid>
        </Grid>
    </Border>
</Window>
