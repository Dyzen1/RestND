<Window x:Class="RestND.MVVM.View.Windows.ReportWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:lvc="clr-namespace:LiveCharts.Wpf;assembly=LiveCharts.Wpf"
        xmlns:viewModel="clr-namespace:RestND.MVVM.ViewModel.Windows"
        xmlns:uc="clr-namespace:RestND.MVVM.View.UserControls"
        xmlns:fa="clr-namespace:FontAwesome.WPF;assembly=FontAwesome.WPF"
        mc:Ignorable="d"
        Style="{StaticResource windowStyle}"
        >

    <!-- Outer window border/theme -->
    <Border Style="{DynamicResource windowBorder}">
        <Grid>
            <!-- Layout: header, content, footer -->
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="100"/>
            </Grid.RowDefinitions>

            <!-- Columns: content + sidebar + side expander rail -->
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="110"/>
                <ColumnDefinition Width="300"/>
            </Grid.ColumnDefinitions>

            <!-- Sidebar -->
            <Expander Style="{DynamicResource sideBarExpander}"
                      Grid.RowSpan="3" Grid.Column="2">
                <uc:SideBar/>
            </Expander>

            <!-- ===== Header: Filters + Actions ===== -->
            <StackPanel Orientation="Horizontal"
                        Grid.Row="0" Grid.Column="0"
                        Margin="20,10,0,0" HorizontalAlignment="Left">
                <Label Content="From:" Margin="0,0,10,0" VerticalAlignment="Center"
                       Foreground="{DynamicResource LightText}"/>
                <DatePicker SelectedDate="{Binding FromDate}" Margin="0,0,10,0"/>

                <Label Content="To:" Margin="10,0,10,0" VerticalAlignment="Center"
                       Foreground="{DynamicResource LightText}"/>
                <DatePicker SelectedDate="{Binding ToDate}" Margin="0,0,15,0"/>

                <ComboBox Width="150"
                          ItemsSource="{Binding FilterOptions}"
                          SelectedItem="{Binding SelectedFilter}"
                          Margin="0,0,15,0"/>

                <Button Content="Load Report"
                        Command="{Binding LoadChartDataCommand}"
                        Style="{DynamicResource loginBtn}"/>

                <Button Content="Download CSV"
                        Margin="10,0,0,0"
                        Command="{Binding ExportCsvCommand}"
                        Style="{DynamicResource loginBtn}"/>

                <Button Content="Download PNG"
                        Margin="10,0,0,0"
                        Click="DownloadPng_Click"
                        Style="{DynamicResource loginBtn}"/>
            </StackPanel>

            <!-- ===== Content: Chart ===== -->
            <Border Style="{DynamicResource windowBorder}"
                    Grid.Row="1" Grid.Column="0" Margin="20,8,8,8">
                <lvc:CartesianChart x:Name="ReportChart"
                                    Series="{Binding SeriesCollection}"
                                    LegendLocation="Right">
                    <lvc:CartesianChart.AxisX>
                        <lvc:Axis Title="Dishes"
                                  Labels="{Binding Labels}"
                                  Foreground="{DynamicResource LightText}"/>
                    </lvc:CartesianChart.AxisX>
                    <lvc:CartesianChart.AxisY>
                        <lvc:Axis Title="Quantity Sold"
                                  MinValue="0"
                                  Foreground="{DynamicResource LightText}"
                                  LabelFormatter="{Binding YFormatter}">
                            <lvc:Axis.Separator>
                                <lvc:Separator Step="1"/>
                            </lvc:Axis.Separator>
                        </lvc:Axis>
                    </lvc:CartesianChart.AxisY>
                </lvc:CartesianChart>
            </Border>

            <!-- ===== Footer: Return + Copywrite ===== -->
            <uc:ReturnBtn x:Name="returnBtn"
                          Grid.Row="2" Grid.Column="0"
                          VerticalAlignment="Bottom" Margin="15,0,0,15"/>

            <TextBlock Style="{DynamicResource copyWrite}"
                       Grid.Row="2" Grid.Column="0"
                       VerticalAlignment="Bottom"
                       HorizontalAlignment="Center"
                       Margin="0,0,0,15"/>
        </Grid>
    </Border>
</Window>
